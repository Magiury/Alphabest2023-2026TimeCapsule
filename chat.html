<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anonymous Chat</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
*{box-sizing:border-box}
body{
    margin:0;
    background:#0f0f0f;
    color:#eaeaea;
    font-family:Arial, sans-serif;
}
.chat-box{
    max-width:600px;
    margin:40px auto;
    padding:20px;
    border:1px solid #222;
    background:#111;
}
#messages{
    height:380px;
    overflow-y:auto;
    padding:10px;
    border:1px solid #222;
    margin-bottom:10px;
}
.msg{
    margin-bottom:8px;
    animation:fadeIn .3s ease;
}
@keyframes fadeIn{
    from{opacity:0;transform:translateY(5px)}
    to{opacity:1;transform:translateY(0)}
}
.name{
    color:#9dffb3;
    font-weight:bold;
}
input{
    width:100%;
    padding:12px;
    background:#1a1a1a;
    border:none;
    color:#fff;
    outline:none;
    font-size:14px;
}
small{
    display:block;
    opacity:.5;
    margin-top:8px;
}
</style>
</head>

<body>

<div class="chat-box">
    <h2>Anonymous Chat</h2>
    <div id="messages"></div>
    <input id="input" placeholder="Type and press Enter...">
    <small>Messages disappear after 30 seconds</small>
</div>

<script>
/* ðŸ”¥ FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT_ID"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const chatRef = db.ref("chat");

/* UI */
const messages = document.getElementById("messages");
const input = document.getElementById("input");

/* Gá»¬I TIN */
input.addEventListener("keydown", e=>{
    if(e.key==="Enter" && input.value.trim()){
        chatRef.push({
            text: input.value,
            time: Date.now()
        });
        input.value="";
    }
});

/* NHáº¬N TIN REALTIME */
chatRef.limitToLast(100).on("child_added", snap=>{
    const data = snap.val();
    const msg = document.createElement("div");
    msg.className="msg";
    msg.innerHTML=`<span class="name">Anonymous</span>: ${data.text}`;
    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;

    /* â³ Tá»° BIáº¾N Máº¤T SAU 30 GIÃ‚Y (UI) */
    setTimeout(()=>{
        msg.style.opacity="0";
        setTimeout(()=>msg.remove(),500);
    },30000);

    /* â³ XOÃ LUÃ”N TRONG DATABASE */
    setTimeout(()=>{
        snap.ref.remove();
    },30000);
});
</script>

</body>
</html>
